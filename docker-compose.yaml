version: '3.8'
services:
  centos7_builder:
    build: ./images/centos7
    image: centos7_builder
    container_name: centos7_builder
    hostname: centos7_builder
    init: true
    environment:
      PS1: '[\e[35mcentos7\e[m \W]# '
    volumes:
      - work:/work
      - ./scripts:/scripts
      - ${WORKSPACE_SHARED_FOLDER}:/share
    # need this to debug
    cap_add:
      - SYS_PTRACE
    security_opt:
      - seccomp:unconfined

  centos8_builder:
    build: ./images/centos8
    image: centos8_builder
    container_name: centos8_builder
    hostname: centos8_builder
    init: true
    environment:
      PS1: '[\e[35mcentos8\e[m \W]# '
    volumes:
      - work:/work
      - ./scripts:/scripts
      - ${WORKSPACE_SHARED_FOLDER}:/share
    # need this to debug
    cap_add:
      - SYS_PTRACE
    security_opt:
      - seccomp:unconfined

  alpine_builder:
    build: ./images/alpine
    image: alpine_builder
    container_name: alpine_builder
    hostname: alpine_builder
    init: true
    environment:
      PS1: '[\e[35malpine\e[m \W]# '
    volumes:
      - work:/work
      - ./scripts:/scripts
      - ${WORKSPACE_SHARED_FOLDER}:/share
    # need this to debug
    cap_add:
      - SYS_PTRACE
    security_opt:
      - seccomp:unconfined

  ubuntu_builder:
    build: ./images/ubuntu
    image: ubuntu_builder
    container_name: ubuntu_builder
    hostname: ubuntu_builder
    init: true
    environment:
      PS1: '[\e[35mubuntu\e[m \W]# '
    volumes:
      - work:/work
      - ./scripts:/scripts
      - ${WORKSPACE_SHARED_FOLDER}:/share
    # need this to debug
    cap_add:
      - SYS_PTRACE
    security_opt:
      - seccomp:unconfined

volumes:
  work:
    name: build_rig_work
